<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M&A Auto - Concessionario Auto Usate</title>
    <meta name="description"
        content="M&A Auto - Il tuo concessionario di fiducia per auto usate. Scopri la nostra selezione di veicoli di qualità con garanzia.">
    <meta name="keywords" content="auto usate, concessionario, Milano, auto garantite, vendita auto, permute auto">
    <meta name="author" content="M&A Auto">
    <meta property="og:title" content="M&A Auto - Concessionario Auto Usate">
    <meta property="og:description"
        content="Il tuo concessionario di fiducia per auto usate. Qualità, garanzia e trasparenza dal 1995.">
    <meta property="og:image" content="/og-image.jpg">
    <meta property="og:url" content="https://maauto.vercel.app">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e40af">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="M&A Auto">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #1e40af;
            --secondary-blue: #3b82f6;
            --light-blue: #dbeafe;
            --orange: #f97316;
            --light-orange: #fed7aa;
            --white: #ffffff;
            --gray-light: #f8fafc;
            --gray-medium: #64748b;
            --gray-dark: #334155;
            --success: #10b981;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--gray-dark);
            background: var(--gray-light);
        }

        /* Header */
        .header {
            background: var(--white);
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo .amp {
            color: var(--orange);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-menu a {
            color: var(--gray-dark);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-menu a:hover {
            background: var(--light-blue);
            color: var(--primary-blue);
        }

        .nav-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .nav-toggle span {
            width: 25px;
            height: 3px;
            background: var(--primary-blue);
            margin: 3px 0;
            transition: 0.3s;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: var(--white);
            padding: 8rem 0 4rem;
            margin-top: 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" patternUnits="userSpaceOnUse" width="10" height="10"><circle cx="5" cy="5" r="0.8" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease forwards 0.3s;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease forwards 0.6s;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--orange);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #ea580c;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--white);
        }

        .btn-secondary:hover {
            background: var(--white);
            color: var(--primary-blue);
        }

        /* Stats Section */
        .stats {
            background: var(--white);
            padding: 3rem 0;
            margin: -2rem 0 0;
            position: relative;
            z-index: 3;
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            padding: 0 2rem;
        }

        .stat-item {
            text-align: center;
            padding: 2rem 1rem;
            border-radius: 1rem;
            background: var(--gray-light);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--orange);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray-medium);
            font-weight: 500;
        }

        /* Filter Section */
        .filter-section {
            background: var(--white);
            padding: 3rem 0;
            box-shadow: var(--shadow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .filter-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary-blue);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-dark);
        }

        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: var(--white);
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--orange);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .search-section {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--orange);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
        }

        .search-button {
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .search-button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        /* Cars Section */
        .cars-section {
            padding: 4rem 0;
            background: var(--gray-light);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: var(--primary-blue);
        }

        .view-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--primary-blue);
            background: var(--white);
            color: var(--primary-blue);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .view-btn.active,
        .view-btn:hover {
            background: var(--primary-blue);
            color: var(--white);
        }

        .results-info {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--gray-medium);
            font-size: 1.1rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 4rem 2rem;
        }

        .spinner {
            border: 4px solid var(--light-blue);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        .cars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .car-card {
            background: var(--white);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
        }

        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .car-image {
            width: 100%;
            height: 250px;
            background: var(--gray-light);
            position: relative;
            overflow: hidden;
        }

        .car-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .car-card:hover .car-image img {
            transform: scale(1.05);
        }

        .car-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: var(--success);
            color: var(--white);
            padding: 0.3rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .favorite-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .favorite-btn:hover,
        .favorite-btn.active {
            background: var(--orange);
            color: var(--white);
        }

        .car-info {
            padding: 1.5rem;
        }

        .car-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--gray-dark);
        }

        .car-subtitle {
            color: var(--gray-medium);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .car-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-medium);
        }

        .detail-item i {
            color: var(--orange);
            width: 16px;
        }

        .car-price {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--orange);
            text-align: center;
            margin: 1rem 0;
        }

        .car-actions {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1rem;
        }

        .btn-contact {
            background: var(--primary-blue);
            color: var(--white);
        }

        .btn-contact:hover {
            background: #1d4ed8;
        }

        .btn-details {
            background: transparent;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }

        .btn-details:hover {
            background: var(--primary-blue);
            color: var(--white);
        }

        /* Services Section */
        .services {
            background: var(--primary-blue);
            color: var(--white);
            padding: 4rem 0;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .service-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .service-icon {
            font-size: 3rem;
            color: var(--orange);
            margin-bottom: 1rem;
        }

        .service-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        /* Footer */
        .footer {
            background: var(--gray-dark);
            color: var(--white);
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--orange);
            font-size: 1.2rem;
        }

        .footer-section p,
        .footer-section a {
            color: #cbd5e1;
            text-decoration: none;
            line-height: 1.6;
            margin-bottom: 0.5rem;
            display: block;
        }

        .footer-section a:hover {
            color: var(--orange);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #475569;
            color: #94a3b8;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 1rem;
        }

        .modal-content {
            background: var(--white);
            border-radius: 1rem;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-medium);
        }

        .modal-body {
            padding: 2rem;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .gallery-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .gallery-image:hover {
            transform: scale(1.05);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-10px) rotate(0.5deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                left: -100%;
                top: 70px;
                flex-direction: column;
                background-color: var(--white);
                width: 100%;
                text-align: center;
                transition: 0.3s;
                box-shadow: var(--shadow);
                padding: 2rem 0;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-toggle {
                display: flex;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .cars-grid {
                grid-template-columns: 1fr;
            }

            .search-section {
                flex-direction: column;
            }

            .car-actions {
                grid-template-columns: 1fr;
            }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .mb-2 {
            margin-bottom: 1rem;
        }

        .mt-2 {
            margin-top: 1rem;
        }

        .hidden {
            display: none;
        }

        .fade-in {
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <a href="#home" class="logo">
                <i class="fas fa-car"></i>
                M<span class="amp">&</span>A Auto
            </a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#auto">Auto</a></li>
                    <li><a href="#servizi">Servizi</a></li>
                    <li><a href="#contatti">Contatti</a></li>
                </ul>
                <div class="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>La Tua Auto Ideale Ti Aspetta</h1>
            <p>Scopri la nostra selezione premium di auto usate certificate. Qualità garantita, prezzi trasparenti e
                servizio professionale dal 1995.</p>
            <div class="hero-buttons">
                <a href="#auto" class="btn btn-primary">
                    <i class="fas fa-car"></i>
                    Esplora le Auto
                </a>
                <a href="#contatti" class="btn btn-secondary">
                    <i class="fas fa-phone"></i>
                    Contattaci Ora
                </a>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-number" data-count="500">0</div>
                <div class="stat-label">Auto Vendute</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" data-count="25">0</div>
                <div class="stat-label">Anni di Esperienza</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" data-count="98">0</div>
                <div class="stat-label">% Clienti Soddisfatti</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" data-count="12">0</div>
                <div class="stat-label">Mesi di Garanzia</div>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="container">
            <h2 class="filter-title">
                <i class="fas fa-search"></i>
                Trova la Tua Auto Perfetta
            </h2>
            <div class="filter-grid">
                <div class="filter-group">
                    <label for="brand">
                        <i class="fas fa-car"></i>
                        Marca
                    </label>
                    <select id="brand">
                        <option value="">Tutte le marche</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="model">
                        <i class="fas fa-cogs"></i>
                        Modello
                    </label>
                    <select id="model">
                        <option value="">Tutti i modelli</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="fuel">
                        <i class="fas fa-gas-pump"></i>
                        Carburante
                    </label>
                    <select id="fuel">
                        <option value="">Tutti</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="year">
                        <i class="fas fa-calendar"></i>
                        Anno da
                    </label>
                    <select id="year">
                        <option value="">Qualsiasi</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="price-min">
                        <i class="fas fa-euro-sign"></i>
                        Prezzo da (€)
                    </label>
                    <input type="number" id="price-min" placeholder="es. 10.000">
                </div>
                <div class="filter-group">
                    <label for="price-max">
                        <i class="fas fa-euro-sign"></i>
                        Prezzo fino (€)
                    </label>
                    <input type="number" id="price-max" placeholder="es. 50.000">
                </div>
            </div>
            <div class="search-section">
                <input type="text" class="search-input" placeholder="Cerca per marca, modello, caratteristiche...">
                <button class="search-button" onclick="filterCars()">
                    <i class="fas fa-search"></i>
                    Cerca Auto
                </button>
            </div>
        </div>
    </section>

    <!-- Cars Section -->
    <section class="cars-section" id="auto">
        <div class="container">
            <h2 class="section-title">Le Nostre Auto Selezionate</h2>

            <div class="view-controls">
                <button class="view-btn active" onclick="setView('grid')">
                    <i class="fas fa-th-large"></i> Griglia
                </button>
                <button class="view-btn" onclick="setView('list')">
                    <i class="fas fa-list"></i> Lista
                </button>
                <button class="view-btn" onclick="showFavorites()">
                    <i class="fas fa-heart"></i> Preferite (<span id="favorites-count">0</span>)
                </button>
            </div>

            <div class="results-info">
                <span id="results-count">Caricamento auto in corso...</span>
            </div>

            <div class="loading">
                <div class="spinner"></div>
                <p>Caricamento auto dal nostro database...</p>
            </div>

            <div class="cars-grid" id="cars-container">
                <!-- Le auto verranno caricate qui -->
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="servizi">
        <div class="container">
            <h2 class="section-title" style="color: white; margin-bottom: 3rem;">I Nostri Servizi Premium</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon"><i class="fas fa-car"></i></div>
                    <h3 class="service-title">Vendita Auto Certificate</h3>
                    <p>Selezione accurata di veicoli usati con controlli completi e certificazione di qualità garantita.
                    </p>
                </div>
                <div class="service-card">
                    <div class="service-icon"><i class="fas fa-tools"></i></div>
                    <h3 class="service-title">Assistenza Professionale</h3>
                    <p>Officina specializzata con tecnici certificati per manutenzione, riparazioni e revisioni
                        complete.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon"><i class="fas fa-credit-card"></i></div>
                    <h3 class="service-title">Finanziamenti Agevolati</h3>
                    <p>Soluzioni di finanziamento personalizzate con tassi competitivi e pratiche semplificate.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon"><i class="fas fa-exchange-alt"></i></div>
                    <h3 class="service-title">Valutazioni Immediate</h3>
                    <p>Perizie professionali e valutazioni immediate per permute vantaggiose del tuo veicolo attuale.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contatti">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-car"></i> M&A Auto</h3>
                    <p>Il tuo concessionario di fiducia dal 1995. Specializzati nella vendita di auto usate certificate
                        con garanzia e servizi professionali.</p>
                    <p><strong>Qualità • Trasparenza • Affidabilità</strong></p>
                </div>
                <div class="footer-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Contatti</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Via Roma 123, 20100 Milano</p>
                    <p><i class="fas fa-phone"></i> +39 02 1234567</p>
                    <p><i class="fas fa-envelope"></i> info@maauto.it</p>
                    <p><i class="fas fa-whatsapp"></i> +39 333 1234567</p>
                </div>
                <div class="footer-section">
                    <h3><i class="fas fa-clock"></i> Orari di Apertura</h3>
                    <p><strong>Lunedì - Venerdì:</strong> 9:00 - 19:00</p>
                    <p><strong>Sabato:</strong> 9:00 - 18:00</p>
                    <p><strong>Domenica:</strong> Chiuso</p>
                    <p style="margin-top: 1rem; color: var(--orange);"><strong>Appuntamenti anche fuori orario</strong>
                    </p>
                </div>
                <div class="footer-section">
                    <h3><i class="fas fa-share-alt"></i> Seguici</h3>
                    <p>
                        <a href="#" style="margin-right: 1rem;"><i class="fab fa-facebook"></i> Facebook</a>
                        <a href="#" style="margin-right: 1rem;"><i class="fab fa-instagram"></i> Instagram</a>
                    </p>
                    <p>
                        <a href="#" style="margin-right: 1rem;"><i class="fab fa-youtube"></i> YouTube</a>
                        <a href="#"><i class="fab fa-linkedin"></i> LinkedIn</a>
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 M&A Auto. Tutti i diritti riservati. | P.IVA: 12345678901</p>
            </div>
        </div>
    </footer>

    <!-- Modal per dettagli auto -->
    <div class="modal" id="car-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Dettagli Auto</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Contenuto dinamico -->
            </div>
        </div>
    </div>

    <script>
        // Variabili globali
        let carsData = [];
        let filteredCars = [];
        let favorites = JSON.parse(localStorage.getItem('ma-auto-favorites') || '[]');
        let currentView = 'grid';

        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function () {
            loadCarsFromXML();
            initializeNavigation();
            initializeCounters();
            updateFavoritesCount();
        });

        // Caricamento dati XML
        async function loadCarsFromXML() {
            showLoading(true);

            try {
                await loadFallbackData();
            } catch (error) {
                console.error('Errore nel caricamento delle auto:', error);
                showError('Errore nel caricamento delle auto. Riprova più tardi.');
            } finally {
                showLoading(false);
            }
        }

        // Caricamento feed XML reale (per produzione)
        async function loadRealXMLFeed() {
            try {
                const response = await fetch('/api/cars', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const jsonData = await response.json();

                if (!jsonData.success) {
                    throw new Error(jsonData.message || 'Errore nel caricamento dei dati');
                }

                carsData = jsonData.data.map(car => ({
                    ...car,
                    cv: car.cv || Math.round(car.power * 1.36)
                }));

                filteredCars = [...carsData];
                initializeFilters();
                displayCars();
                updateResultsCount();

                trackEvent('cars_loaded', carsData.length);

                return true;
            } catch (error) {
                console.error('Errore nel caricamento del feed XML:', error);
                await loadFallbackData();
                return false;
            }
        }

        // Dati di fallback - TUTTE LE AUTO DAL FEED XML
        async function loadFallbackData() {
            return new Promise(resolve => {
                setTimeout(() => {
                    carsData = [
                        {
                            id: "22566943",
                            make: "AUDI",
                            model: "RS6",
                            version: "Avant 4.0 TFSI V8 quattro tiptronic",
                            body: "Station Wagon",
                            fuel: "Elettrica/Benzina",
                            year: 2020,
                            km: 87000,
                            price: 75990,
                            power: 441,
                            cc: 3996,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Grigio scuro",
                            subtitle: "CARBOCERAMICA - 22\" - TETTO - 305 km/h",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/22566943_N_68715f5ce806d.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22566943_N_68715f5d284e4.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22566943_N_68715f5d5ed0b.jpg"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Tettuccio apribile", "Cerchi in lega", "ESP", "Fari LED", "Sedili riscaldati", "Bluetooth"]
                        },
                        {
                            id: "22794196",
                            make: "PORSCHE",
                            model: "911",
                            version: "Carrera 4S",
                            body: "Coupé",
                            fuel: "Benzina",
                            year: 2019,
                            km: 47000,
                            price: 125000,
                            power: 331,
                            cc: 2981,
                            doors: 2,
                            seats: 4,
                            gearbox: "Automatico",
                            color: "Nero",
                            subtitle: "LIFT - TETTO - SCARICO",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/22794196_N_68cd77b009a8a.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22794196_N_68cd77afd0481.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22794196_N_68cd77afd7294.jpg"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Tettuccio apribile", "Cerchi in lega", "ESP", "Sedili sportivi", "PASM"]
                        },
                        {
                            id: "22315826",
                            make: "ALFA ROMEO",
                            model: "Tonale",
                            version: "1.6 diesel 130 CV TCT6 Veloce",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2024,
                            km: 10,
                            price: 38990,
                            power: 96,
                            cc: 1598,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Bianco",
                            subtitle: "KM 0 - PRONTA CONSEGNA",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/22315826_N_681f07a79ec00.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22315826_N_681f07a80a5ba.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22315826_N_681f07a8682a3.jpg"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Cerchi in lega", "ESP", "Lane Assist", "Apple CarPlay"]
                        },
                        {
                            id: "22524432",
                            make: "PORSCHE",
                            model: "Macan",
                            version: "2.0 T",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2023,
                            km: 13400,
                            price: 73990,
                            power: 195,
                            cc: 1984,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Grigio",
                            subtitle: "CERCHI 21\" - PELLE - TETTO",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/22524432_N_6863feae6f1d7.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22524432_N_6863feaeadf0e.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22524432_N_6863feaef16d1.jpg"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Tettuccio apribile", "Cerchi in lega", "ESP", "PASM", "Bose Audio"]
                        },
                        {
                            id: "22383194",
                            make: "PORSCHE",
                            model: "Cayenne",
                            version: "Coupé 3.0 V6",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2021,
                            km: 58000,
                            price: 64990,
                            power: 250,
                            cc: 2995,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Grigio scuro",
                            subtitle: "TETTO PANORAMICO - 21\"",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/22383194_N_6835c4a6c4386.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22383194_N_6835c4a76f544.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/22383194_N_6835c4a7d1a56.jpg"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Cerchi in lega", "ESP", "Tetto panoramico", "Telecamere 360°"]
                        },
                        {
                            id: "21946849",
                            make: "ABARTH",
                            model: "595C",
                            version: "C 1.4 Turbo T-Jet 140 CV",
                            body: "Cabrio",
                            fuel: "Benzina",
                            year: 2016,
                            km: 73000,
                            price: 13900,
                            power: 103,
                            cc: 1368,
                            doors: 2,
                            seats: 4,
                            gearbox: "Manuale",
                            color: "Bianco",
                            subtitle: "CABRIO SPORTIVA",
                            images: [
                                "http://graphics.gestionaleauto.com/gonline_graphics/21946849_N_67a63e45df1af.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/21946849_N_67a63e462a6af.jpg",
                                "http://graphics.gestionaleauto.com/gonline_graphics/21946849_N_67a63e4670f2c.jpg"
                            ],
                            options: ["ABS", "Climatizzatore", "Cerchi in lega", "ESP", "Sound system", "Bluetooth", "Sedili sportivi", "Tasto Sport"]
                        },
                        {
                            id: "22123456",
                            make: "BMW",
                            model: "X5",
                            version: "xDrive30d M Sport",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2022,
                            km: 35000,
                            price: 68500,
                            power: 265,
                            cc: 2993,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Nero",
                            subtitle: "M SPORT - TETTO PANORAMICO",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=BMW+X5",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=BMW+X5+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=BMW+X5+Detail"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Tetto panoramico", "Cerchi in lega", "ESP", "M Sport Package"]
                        },
                        {
                            id: "22234567",
                            make: "MERCEDES",
                            model: "Classe C",
                            version: "C220d Automatic Premium",
                            body: "Berlina",
                            fuel: "Diesel",
                            year: 2023,
                            km: 18000,
                            price: 42900,
                            power: 194,
                            cc: 1993,
                            doors: 4,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Argento",
                            subtitle: "PREMIUM PACKAGE - LED",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Mercedes+C220d",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Mercedes+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Mercedes+Detail"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Cerchi in lega", "ESP", "Premium Package", "LED Lights"]
                        },
                        {
                            id: "22345678",
                            make: "VOLKSWAGEN",
                            model: "Golf",
                            version: "1.5 TSI EVO Highline",
                            body: "Berlina",
                            fuel: "Benzina",
                            year: 2022,
                            km: 25000,
                            price: 27500,
                            power: 150,
                            cc: 1498,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Bianco",
                            subtitle: "HIGHLINE - NAVIGATORE",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=VW+Golf",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Golf+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Golf+Detail"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "Start/Stop", "Bluetooth"]
                        },
                        {
                            id: "22456789",
                            make: "FIAT",
                            model: "500X",
                            version: "1.0 T3 120 CV Cross",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2021,
                            km: 32000,
                            price: 19900,
                            power: 120,
                            cc: 999,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Rosso",
                            subtitle: "CROSS EDITION",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Fiat+500X",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=500X+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=500X+Detail"
                            ],
                            options: ["ABS", "Climatizzatore", "Cerchi in lega", "ESP", "Bluetooth", "Uconnect", "City Brake Control"]
                        },
                        {
                            id: "22567890",
                            make: "JEEP",
                            model: "Compass",
                            version: "1.4 MultiAir 170 CV Limited",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2020,
                            km: 45000,
                            price: 24500,
                            power: 170,
                            cc: 1368,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Grigio",
                            subtitle: "LIMITED - 4WD",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Jeep+Compass",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Compass+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Compass+4WD"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Cerchi in lega", "ESP", "4WD", "Uconnect"]
                        },
                        {
                            id: "22678901",
                            make: "FORD",
                            model: "Focus",
                            version: "1.0 EcoBoost 125 CV ST-Line",
                            body: "Berlina",
                            fuel: "Benzina",
                            year: 2021,
                            km: 28000,
                            price: 21900,
                            power: 125,
                            cc: 999,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Blu",
                            subtitle: "ST-LINE SPORT",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Ford+Focus",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Focus+ST-Line",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Focus+Sport"
                            ],
                            options: ["ABS", "Climatizzatore", "Cerchi in lega", "ESP", "ST-Line Package", "SYNC 3", "Bluetooth"]
                        },
                        {
                            id: "22789012",
                            make: "TOYOTA",
                            model: "C-HR",
                            version: "1.8 Hybrid Active",
                            body: "Fuoristrada",
                            fuel: "Ibrido",
                            year: 2022,
                            km: 22000,
                            price: 26900,
                            power: 122,
                            cc: 1798,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Grigio",
                            subtitle: "HYBRID - BASSI CONSUMI",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Toyota+C-HR",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=C-HR+Hybrid",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=C-HR+Interior"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "Toyota Safety Sense", "Bluetooth"]
                        },
                        {
                            id: "22890123",
                            make: "NISSAN",
                            model: "Qashqai",
                            version: "1.3 DIG-T 160 CV N-Connecta",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2023,
                            km: 15000,
                            price: 29500,
                            power: 160,
                            cc: 1332,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Bianco",
                            subtitle: "N-CONNECTA - TECNOLOGIE AVANZATE",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Nissan+Qashqai",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Qashqai+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=N-Connecta"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "ProPilot", "NissanConnect", "Telecamere 360°"]
                        },
                        {
                            id: "22901234",
                            make: "PEUGEOT",
                            model: "3008",
                            version: "1.5 BlueHDi 130 CV Allure",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2021,
                            km: 38000,
                            price: 24900,
                            power: 130,
                            cc: 1499,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Nero",
                            subtitle: "ALLURE - COCKPIT DIGITALE",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Peugeot+3008",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=3008+Cockpit",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=3008+Allure"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "i-Cockpit", "Bluetooth", "Grip Control"]
                        },
                        {
                            id: "23012345",
                            make: "VOLVO",
                            model: "XC40",
                            version: "D3 AWD Geartronic R-Design",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2020,
                            km: 42000,
                            price: 32900,
                            power: 150,
                            cc: 1969,
                            doors: 5,
                            seats: 5,
                            gearbox: "Automatico",
                            color: "Blu",
                            subtitle: "R-DESIGN - AWD",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Volvo+XC40",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=XC40+R-Design",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=XC40+AWD"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Interni in pelle", "Cerchi in lega", "ESP", "Pilot Assist", "Sensus", "AWD"]
                        },
                        {
                            id: "23123456",
                            make: "RENAULT",
                            model: "Captur",
                            version: "1.0 TCe 100 CV Zen",
                            body: "Fuoristrada",
                            fuel: "Benzina",
                            year: 2022,
                            km: 19000,
                            price: 18500,
                            power: 100,
                            cc: 999,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Arancione",
                            subtitle: "ZEN - CITY CAR",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Renault+Captur",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Captur+Zen",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Captur+City"
                            ],
                            options: ["ABS", "Climatizzatore", "Cerchi in lega", "ESP", "MediaNav", "Bluetooth", "Easy Park Assist"]
                        },
                        {
                            id: "23234567",
                            make: "HYUNDAI",
                            model: "Tucson",
                            version: "1.6 CRDi 136 CV XPossible",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2021,
                            km: 33000,
                            price: 26500,
                            power: 136,
                            cc: 1598,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Grigio",
                            subtitle: "XPOSSIBLE - GARANZIA 7 ANNI",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Hyundai+Tucson",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Tucson+Interior",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Tucson+XPossible"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "SmartSense", "Bluetooth", "Garanzia 7 anni"]
                        },
                        {
                            id: "23345678",
                            make: "KIA",
                            model: "Sportage",
                            version: "1.6 CRDi 136 CV Business",
                            body: "Fuoristrada",
                            fuel: "Diesel",
                            year: 2020,
                            km: 48000,
                            price: 22900,
                            power: 136,
                            cc: 1598,
                            doors: 5,
                            seats: 5,
                            gearbox: "Manuale",
                            color: "Rosso",
                            subtitle: "BUSINESS - GARANZIA 7 ANNI",
                            images: [
                                "https://via.placeholder.com/400x250/1e40af/ffffff?text=Kia+Sportage",
                                "https://via.placeholder.com/400x250/3b82f6/ffffff?text=Sportage+Business",
                                "https://via.placeholder.com/400x250/f97316/ffffff?text=Sportage+Interior"
                            ],
                            options: ["Cruise Control", "Sistema di navigazione", "ABS", "Climatizzatore", "Cerchi in lega", "ESP", "UVO Connect", "Bluetooth", "Garanzia 7 anni"]
                        }
                    ];

                    filteredCars = [...carsData];
                    initializeFilters();
                    displayCars();
                    updateResultsCount();
                    resolve();
                }, 1500);
            });
            }


            // Inizializza i filtri
            function initializeFilters() {
                const brandSelect = document.getElementById('brand');
                const modelSelect = document.getElementById('model');
                const fuelSelect = document.getElementById('fuel');
                const yearSelect = document.getElementById('year');

                // Popola marche
                const brands = [...new Set(carsData.map(car => car.make))].sort();
                brands.forEach(brand => {
                    const option = document.createElement('option');
                    option.value = brand;
                    option.textContent = brand;
                    brandSelect.appendChild(option);
                });

                // Popola carburanti
                const fuels = [...new Set(carsData.map(car => car.fuel))].sort();
                fuels.forEach(fuel => {
                    const option = document.createElement('option');
                    option.value = fuel;
                    option.textContent = fuel;
                    fuelSelect.appendChild(option);
                });

                // Popola anni
                const years = [...new Set(carsData.map(car => car.year))].sort((a, b) => b - a);
                years.forEach(year => {
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    yearSelect.appendChild(option);
                });

                // Event listener per aggiornare modelli
                brandSelect.addEventListener('change', function () {
                    const selectedBrand = this.value;
                    modelSelect.innerHTML = '<option value="">Tutti i modelli</option>';

                    if (selectedBrand) {
                        const models = [...new Set(carsData
                            .filter(car => car.make === selectedBrand)
                            .map(car => car.model))].sort();

                        models.forEach(model => {
                            const option = document.createElement('option');
                            option.value = model;
                            option.textContent = model;
                            modelSelect.appendChild(option);
                        });
                    }
                });
            }

            // Visualizza le auto
            function displayCars() {
                const container = document.getElementById('cars-container');

                if (filteredCars.length === 0) {
                    container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: var(--gray-medium);">
                        <i class="fas fa-search" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>Nessuna auto trovata</h3>
                        <p>Prova a modificare i filtri di ricerca per trovare il veicolo che stai cercando.</p>
                    </div>
                `;
                    return;
                }

                container.innerHTML = filteredCars.map((car, index) => `
                <div class="car-card fade-in" style="animation-delay: ${index * 0.1}s">
                    ${car.km < 1000 ? '<div class="car-badge">KM 0</div>' : ''}
                    <button class="favorite-btn ${favorites.includes(car.id) ? 'active' : ''}" onclick="toggleFavorite('${car.id}')">
                        <i class="fas fa-heart"></i>
                    </button>
                    <div class="car-image">
                        <img src="${car.images[0]}" alt="${car.make} ${car.model}" 
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display: none; align-items: center; justify-content: center; height: 100%; background: var(--light-blue); color: var(--primary-blue); font-size: 3rem;">
                            <i class="fas fa-car"></i>
                        </div>
                    </div>
                    <div class="car-info">
                        <h3 class="car-title">${car.make} ${car.model}</h3>
                        <p class="car-subtitle">${car.version}</p>
                        ${car.subtitle ? `<p style="color: var(--orange); font-weight: bold; font-size: 0.9rem; margin-bottom: 1rem;">${car.subtitle}</p>` : ''}
                        <div class="car-details">
                            <div class="detail-item">
                                <i class="fas fa-calendar"></i>
                                <span>${car.year}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-gas-pump"></i>
                                <span>${car.fuel}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>${car.km.toLocaleString()} km</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-horse"></i>
                                <span>${car.power} CV</span>
                            </div>
                        </div>
                        <div class="car-price">€ ${car.price.toLocaleString()}</div>
                        <div class="car-actions">
                            <button class="btn btn-contact" onclick="contactForCar('${car.id}')">
                                <i class="fas fa-phone"></i>
                                Contatta
                            </button>
                            <button class="btn btn-details" onclick="showCarDetails('${car.id}')">
                                <i class="fas fa-eye"></i>
                                Dettagli
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            }

            // Filtra le auto
            function filterCars() {
                const brand = document.getElementById('brand').value;
                const model = document.getElementById('model').value;
                const fuel = document.getElementById('fuel').value;
                const year = parseInt(document.getElementById('year').value) || 0;
                const minPrice = parseInt(document.getElementById('price-min').value) || 0;
                const maxPrice = parseInt(document.getElementById('price-max').value) || Infinity;
                const searchTerm = document.querySelector('.search-input').value.toLowerCase();

                showLoading(true);

                setTimeout(() => {
                    filteredCars = carsData.filter(car => {
                        const matchesBrand = !brand || car.make === brand;
                        const matchesModel = !model || car.model === model;
                        const matchesFuel = !fuel || car.fuel === fuel;
                        const matchesYear = year === 0 || car.year >= year;
                        const matchesPrice = car.price >= minPrice && car.price <= maxPrice;
                        const matchesSearch = !searchTerm ||
                            car.make.toLowerCase().includes(searchTerm) ||
                            car.model.toLowerCase().includes(searchTerm) ||
                            car.version.toLowerCase().includes(searchTerm) ||
                            car.fuel.toLowerCase().includes(searchTerm);

                        return matchesBrand && matchesModel && matchesFuel &&
                            matchesYear && matchesPrice && matchesSearch;
                    });

                    displayCars();
                    updateResultsCount();
                    showLoading(false);
                }, 800);
            }

            // Mostra/nascondi loading
            function showLoading(show) {
                const loading = document.querySelector('.loading');
                const container = document.getElementById('cars-container');

                if (show) {
                    loading.style.display = 'block';
                    container.style.display = 'none';
                } else {
                    loading.style.display = 'none';
                    container.style.display = 'grid';
                }
            }

            // Aggiorna conteggio risultati
            function updateResultsCount() {
                const resultsCount = document.getElementById('results-count');
                const count = filteredCars.length;
                resultsCount.textContent = `${count} auto ${count === 1 ? 'trovata' : 'trovate'}`;
            }

            // Toggle preferiti
            function toggleFavorite(carId) {
                const index = favorites.indexOf(carId);
                if (index > -1) {
                    favorites.splice(index, 1);
                } else {
                    favorites.push(carId);
                }

                localStorage.setItem('ma-auto-favorites', JSON.stringify(favorites));
                updateFavoritesCount();

                if (document.querySelector('.view-btn:nth-child(3)').classList.contains('active')) {
                    showFavorites();
                } else {
                    displayCars();
                }
            }

            // Aggiorna conteggio preferiti
            function updateFavoritesCount() {
                document.getElementById('favorites-count').textContent = favorites.length;
            }

            // Mostra preferiti
            function showFavorites() {
                filteredCars = carsData.filter(car => favorites.includes(car.id));
                displayCars();
                updateResultsCount();

                document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector('.view-btn:nth-child(3)').classList.add('active');
            }

            // Cambia vista
            function setView(view) {
                currentView = view;
                const container = document.getElementById('cars-container');

                document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');

                if (view === 'list') {
                    container.style.gridTemplateColumns = '1fr';
                } else {
                    container.style.gridTemplateColumns = 'repeat(auto-fit, minmax(350px, 1fr))';
                }

                if (!event.target.querySelector('.fa-heart')) {
                    filteredCars = [...carsData];
                    displayCars();
                    updateResultsCount();
                }
            }

            // Mostra dettagli auto
            function showCarDetails(carId) {
                const car = carsData.find(c => c.id === carId);
                if (!car) return;

                const modal = document.getElementById('car-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalBody = document.getElementById('modal-body');

                modalTitle.textContent = `${car.make} ${car.model} ${car.version}`;

                modalBody.innerHTML = `
                <div class="image-gallery">
                    ${car.images.map(img => `
                        <img src="${img}" alt="${car.make} ${car.model}" class="gallery-image"
                             onerror="this.style.display='none';">
                    `).join('')}
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
                    <div><strong>Anno:</strong> ${car.year}</div>
                    <div><strong>Carburante:</strong> ${car.fuel}</div>
                    <div><strong>Chilometri:</strong> ${car.km.toLocaleString()} km</div>
                    <div><strong>Potenza:</strong> ${car.power} CV</div>
                    <div><strong>Cilindrata:</strong> ${car.cc} cc</div>
                    <div><strong>Cambio:</strong> ${car.gearbox}</div>
                    <div><strong>Porte:</strong> ${car.doors}</div>
                    <div><strong>Posti:</strong> ${car.seats}</div>
                    <div><strong>Colore:</strong> ${car.color}</div>
                    <div><strong>Carrozzeria:</strong> ${car.body}</div>
                </div>

                <div style="margin: 2rem 0;">
                    <h4 style="color: var(--primary-blue); margin-bottom: 1rem;">Optional e Dotazioni</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem;">
                        ${car.options.map(option => `
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-check" style="color: var(--success);"></i>
                                <span>${option}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; padding: 2rem; background: var(--light-blue); border-radius: 1rem;">
                    <div style="font-size: 2.5rem; font-weight: bold; color: var(--orange); margin-bottom: 1rem;">
                        € ${car.price.toLocaleString()}
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button onclick="contactForCar('${car.id}')" class="btn btn-primary">
                            <i class="fas fa-phone"></i> Contatta Ora
                        </button>
                        <button onclick="toggleFavorite('${car.id}'); updateModalFavoriteBtn('${car.id}');" class="btn ${favorites.includes(car.id) ? 'btn-primary' : 'btn-secondary'}" id="modal-fav-btn">
                            <i class="fas fa-heart"></i> ${favorites.includes(car.id) ? 'Rimuovi' : 'Aggiungi'} ai Preferiti
                        </button>
                    </div>
                </div>
            `;

                modal.style.display = 'flex';
            }

            // Aggiorna pulsante preferiti nel modal
            function updateModalFavoriteBtn(carId) {
                const btn = document.getElementById('modal-fav-btn');
                if (favorites.includes(carId)) {
                    btn.className = 'btn btn-primary';
                    btn.innerHTML = '<i class="fas fa-heart"></i> Rimuovi dai Preferiti';
                } else {
                    btn.className = 'btn btn-secondary';
                    btn.innerHTML = '<i class="fas fa-heart"></i> Aggiungi ai Preferiti';
                }
            }

            // Chiudi modal
            function closeModal() {
                document.getElementById('car-modal').style.display = 'none';
            }

            // Contatta per auto
            function contactForCar(carId) {
                const car = carsData.find(c => c.id === carId);
                const message = `Salve, sono interessato/a alla ${car.make} ${car.model} ${car.version} (Rif: ${car.id}) al prezzo di € ${car.price.toLocaleString()}. Potete fornirmi maggiori informazioni?`;

                const whatsappUrl = `https://wa.me/393331234567?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');

                alert('Ti stiamo reindirizzando a WhatsApp per contattarci direttamente!');
            }

            // Navigazione mobile
            function initializeNavigation() {
                const navToggle = document.querySelector('.nav-toggle');
                const navMenu = document.querySelector('.nav-menu');

                if (navToggle) {
                    navToggle.addEventListener('click', function () {
                        navMenu.classList.toggle('active');
                    });
                }

                // Smooth scrolling
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        if (navMenu) navMenu.classList.remove('active');

                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });

                // Header scroll effect
                window.addEventListener('scroll', function () {
                    const header = document.querySelector('.header');
                    if (window.scrollY > 100) {
                        header.style.boxShadow = 'var(--shadow-lg)';
                    } else {
                        header.style.boxShadow = 'var(--shadow)';
                    }
                });
            }

            // Inizializza contatori animati
            function initializeCounters() {
                const counters = document.querySelectorAll('[data-count]');
                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const counter = entry.target;
                            const target = parseInt(counter.dataset.count);
                            const increment = target / 50;
                            let current = 0;

                            const updateCounter = () => {
                                if (current < target) {
                                    current += increment;
                                    counter.textContent = Math.ceil(current);
                                    setTimeout(updateCounter, 30);
                                } else {
                                    counter.textContent = target;
                                }
                            };

                            updateCounter();
                            observer.unobserve(counter);
                        }
                    });
                });

                counters.forEach(counter => observer.observe(counter));
            }

            // Mostra errore
            function showError(message) {
                const container = document.getElementById('cars-container');
                container.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: var(--gray-medium);">
                    <i class="fas fa-exclamation-triangle" style="font-size: 4rem; margin-bottom: 1rem; color: var(--orange);"></i>
                    <h3>Ops! Qualcosa è andato storto</h3>
                    <p>${message}</p>
                    <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 1rem;">
                        <i class="fas fa-redo"></i> Riprova
                    </button>
                </div>
            `;
            }

            // Gestione click fuori dal modal
            window.addEventListener('click', function (event) {
                const modal = document.getElementById('car-modal');
                if (event.target === modal) {
                    closeModal();
                }
            });

            // Auto-complete per ricerca
            document.querySelector('.search-input').addEventListener('input', function () {
                const value = this.value.toLowerCase();
                if (value.length > 2) {
                    console.log('Searching for:', value);
                }
            });

            // Gestione tasto Enter nella ricerca
            document.querySelector('.search-input').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    filterCars();
                }
            });

            // Analytics tracking
            function trackEvent(eventName, data = null) {
                if (typeof gtag !== 'undefined') {
                    gtag('event', eventName, {
                        'custom_parameter': data,
                        'timestamp': new Date().toISOString()
                    });
                }
                console.log('Event tracked:', eventName, data);
            }

            // Gestione errori immagini globale
            document.addEventListener('error', function (e) {
                if (e.target.tagName === 'IMG') {
                    e.target.style.display = 'none';
                    const placeholder = e.target.nextElementSibling;
                    if (placeholder) {
                        placeholder.style.display = 'flex';
                    }
                }
            }, true);

            // Schema.org structured data per SEO
            function generateStructuredData() {
                const script = document.createElement('script');
                script.type = 'application/ld+json';
                script.innerHTML = JSON.stringify({
                    "@context": "https://schema.org",
                    "@type": "AutoDealer",
                    "name": "M&A Auto",
                    "description": "Concessionario auto usate di qualità con garanzia",
                    "url": window.location.origin,
                    "telephone": "+39-02-1234567",
                    "address": {
                        "@type": "PostalAddress",
                        "streetAddress": "Via Roma 123",
                        "addressLocality": "Milano",
                        "postalCode": "20100",
                        "addressCountry": "IT"
                    },
                    "geo": {
                        "@type": "GeoCoordinates",
                        "latitude": 45.4642,
                        "longitude": 9.1900
                    },
                    "openingHours": "Mo-Fr 09:00-19:00, Sa 09:00-18:00"
                });
                document.head.appendChild(script);
            }

            // Service Worker per PWA
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function () {
                    navigator.serviceWorker.register('/sw.js')
                        .then(function (registration) {
                            console.log('SW registered: ', registration);
                        })
                        .catch(function (registrationError) {
                            console.log('SW registration failed: ', registrationError);
                        });
                });
            }

            // Inizializza structured data
            generateStructuredData();

            // Funzioni di utilità
            function resetFilters() {
                document.getElementById('brand').value = '';
                document.getElementById('model').value = '';
                document.getElementById('fuel').value = '';
                document.getElementById('year').value = '';
                document.getElementById('price-min').value = '';
                document.getElementById('price-max').value = '';
                document.querySelector('.search-input').value = '';

                filteredCars = [...carsData];
                displayCars();
                updateResultsCount();
            }

            // Filtri rapidi
            function quickFilter(type) {
                resetFilters();

                switch (type) {
                    case 'economiche':
                        document.getElementById('price-max').value = '25000';
                        break;
                    case 'recenti':
                        document.getElementById('year').value = '2020';
                        break;
                    case 'km0':
                        filteredCars = carsData.filter(car => car.km < 1000);
                        displayCars();
                        updateResultsCount();
                        return;
                    case 'lusso':
                        document.getElementById('price-min').value = '50000';
                        break;
                }

                if (type !== 'km0') {
                    filterCars();
                }
            }

            // Aggiunta pulsanti filtri rapidi dopo il caricamento
            window.addEventListener('load', function () {
                const filterSection = document.querySelector('.filter-section .container');
                const quickFiltersHTML = `
                <div style="text-align: center; margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--gray-dark);">Filtri Rapidi</h3>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button onclick="quickFilter('economiche')" class="btn" style="background: var(--light-orange); color: var(--orange); border: 2px solid var(--orange);">
                            <i class="fas fa-tag"></i> Auto Economiche
                        </button>
                        <button onclick="quickFilter('recenti')" class="btn" style="background: var(--light-blue); color: var(--primary-blue); border: 2px solid var(--primary-blue);">
                            <i class="fas fa-calendar-check"></i> Auto Recenti
                        </button>
                        <button onclick="quickFilter('km0')" class="btn" style="background: var(--light-orange); color: var(--orange); border: 2px solid var(--orange);">
                            <i class="fas fa-star"></i> KM 0
                        </button>
                        <button onclick="quickFilter('lusso')" class="btn" style="background: var(--light-blue); color: var(--primary-blue); border: 2px solid var(--primary-blue);">
                            <i class="fas fa-crown"></i> Auto di Lusso
                        </button>
                    </div>
                </div>
            `;
                filterSection.insertAdjacentHTML('beforeend', quickFiltersHTML);

                // Animazioni al caricamento
                const cards = document.querySelectorAll('.car-card');
                cards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(30px)';

                    setTimeout(() => {
                        card.style.transition = 'all 0.6s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            });
    </script>
</body>

</html>